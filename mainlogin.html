<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Main Login Page</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
    body { min-height: 100vh; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #f0f4ff, #ffffff); }
    .container { width: 100%; max-width: 380px; background: #fff; padding: 2rem; border-radius: 16px; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1); }
    .tabs { display: flex; justify-content: space-around; margin-bottom: 1.5rem; border-bottom: 2px solid #eee; }
    .tab { flex: 1; text-align: center; padding: 0.7rem 0; cursor: pointer; font-weight: bold; color: #666; }
    .tab.active { color: #0077cc; border-bottom: 2px solid #0077cc; }
    form { display: none; }
    form.active { display: block; }
    label { display: block; font-size: 0.85rem; margin-bottom: 0.3rem; color: #444; }
    .input-box { position: relative; margin-bottom: 1rem; }
    input[type="text"], input[type="password"] { width: 100%; padding: 0.6rem; padding-right: 2.5rem; border-radius: 10px; border: 1px solid #ccc; font-size: 0.95rem; }
    .eye { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer; width: 20px; height: 20px; fill: #666; }
    .options { display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem; font-size: 0.85rem; color: #555; }
    .options a { color: #0077cc; text-decoration: none; }
    button.login { width: 100%; padding: 0.7rem; background: #0077cc; color: #fff; font-size: 1rem; border: none; border-radius: 10px; cursor: pointer; margin-bottom: 1rem; }
    button.login:hover { background: #005fa3; }
    </style>
</head>
<body>
<div class="container">
  <!-- Tabs -->
  <div class="tabs">
  <div class="tab active" onclick="switchTab('login', this)">Login</div>
<div class="tab bottom" onclick="switchTab('signup', this)">Sign Up</div>
</div>
  <!-- Login Form -->
  <form id="login" class="active">
    <label>Username</label>
    <div class="input-box">
      <input type="text" placeholder="Enter your username" required />
    </div>

    <label>Password</label>
    <div class="input-box">
      <input type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required id="login-pass" />
      <svg class="eye" onclick="togglePass('login-pass', this)" viewBox="0 0 24 24">
        <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zm0 12c-2.48 0-4.5-2.02-4.5-4.5S9.52 7.5 12 7.5 16.5 9.52 16.5 12 14.48 16.5 12 16.5z"/>
        <path d="M0 0h24v24H0z" fill="none"/>
      </svg>
    </div>
    <div id="login-error" style="color:red;margin:0;padding:0;"></div>


    <button type="submit" class="login">Login</button>
  </form>

  <!-- Signup Form -->
  <form id="signup">
    <label>Username</label>
    <div class="input-box">
      <input type="text" placeholder="Choose a username" required />
    </div>

    <label>Password</label>
    <div class="input-box">
      <input type="password" placeholder="Enter password" required id="signup-pass" />
      <svg class="eye" onclick="togglePass('signup-pass', this)" viewBox="0 0 24 24">
        <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zm0 12c-2.48 0-4.5-2.02-4.5-4.5S9.52 7.5 12 7.5 16.5 9.52 16.5 12 14.48 16.5 12 16.5z"/>
        <path d="M0 0h24v24H0z" fill="none"/>
      </svg>
    </div>

    <label>Confirm Password</label>
    <div class="input-box">
      <input type="password" placeholder="Re-enter password" required id="confirm-pass" />
      <svg class="eye" onclick="togglePass('confirm-pass', this)" viewBox="0 0 24 24">
        <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zm0 12c-2.48 0-4.5-2.02-4.5-4.5S9.52 7.5 12 7.5 16.5 9.52 16.5 12 14.48 16.5 12 16.5z"/>
        <path d="M0 0h24v24H0z" fill="none"/>
      </svg>
    </div>
    <div id="signup-error" style="color:red;margin:0;padding:0;"></div>
    <button type="submit" class="login">Sign Up</button>
  </form>
</div>

<script>
function switchTab(tab) {
  document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
  document.querySelectorAll("form").forEach(f => f.classList.remove("active"));

  document.getElementById(tab).classList.add("active");
  event.target.classList.add("active");
}

function togglePass(id, el) {
  const input = document.getElementById(id);
  if (input.type === "password") {
    input.type = "text";
    el.innerHTML = '<path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zm0 12c-2.48 0-4.5-2.02-4.5-4.5S9.52 7.5 12 7.5 16.5 9.52 16.5 12 14.48 16.5 12 16.5z"/><circle cx="12" cy="12" r="2.5"/>'; // Open eye
  } else {
    input.type = "password";
    el.innerHTML = '<path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zm0 12c-2.48 0-4.5-2.02-4.5-4.5S9.52 7.5 12 7.5 16.5 9.52 16.5 12 14.48 16.5 12 16.5z"/><path d="M0 0h24v24H0z" fill="none"/>'; // Closed eye
  }
}
</script>
  <script>
const API_URL = "https://libraryback-api.onrender.com"; // backend server
// Handle Signup
document.getElementById("signup").addEventListener("submit", async (e) => {
  e.preventDefault();

  const username = e.target.querySelector("input[placeholder='Choose a username']").value;
  const password = document.getElementById("signup-pass").value;
  const confirmPass = document.getElementById("confirm-pass").value;

  if (password !== confirmPass) {
    document.getElementById("signup-error").innerText = "Passwords do not match!";
    return;
  }

  try {
    const res = await fetch(`${API_URL}/signup`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ username, password }) // here I used dummy email
    });

    const data = await res.json();
    if (res.ok) {
      document.getElementById("signup-error").innerText =  "Signup successful!";
      switchTab("login"); // go back to login tab
    } else {
      document.getElementById("signup-error").innerText = data.message || "Signup failed";
    }
  } catch (err) {
    console.log("Error: " + err.message) ;
  }
});

// Handle Login
document.getElementById("login").addEventListener("submit", async (e) => {
  e.preventDefault();

  const username = e.target.querySelector("input[placeholder='Enter your username']").value;
  const password = document.getElementById("login-pass").value;

  try {
    const res = await fetch(`${API_URL}/login`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ username, password })
    });

    const data = await res.json();
    if (res.ok) {
      document.getElementById("login-error").innerText = "Login successful!";
      // Redirect to dashboard or home
      localStorage.setItem("username", username);
      localStorage.setItem("premium", data.premium);      // ðŸ”¹ store true/false
     window.location.href = "nav.html";
    } else {
      document.getElementById("login-error").innerText = data.message || "Login failed";
    }
  } catch (err) {
    console.log("Error: " + err.message);
  }
});
  </script>
</body>
</html>